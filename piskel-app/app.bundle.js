!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=26)}([function(e,t){e.exports=(e,t,n,r)=>{const i=Math.floor(t/e.pixelSize),s=Math.floor(n/e.pixelSize),a=s*e.cols+i;return a!==r&&i>=0&&s>=0&&i<e.cols&&s<e.rows?{indx:a,x:i,y:s}:{indx:void 0,x:void 0,y:void 0}}},function(e,t){e.exports=(e,t,n)=>t<0||n<0||t>=e.cols||n>=e.rows},function(e,t,n){e.exports=n.p+"de476d8e412c6a57ee46315d03cd60ec.png"},function(e,t,n){e.exports=n.p+"dc0c3d772410a5bb267cba4a6424ec24.png"},function(e,t,n){e.exports=n.p+"a15754a34f7f6bc40aa68c3c7d88a5a7.png"},function(e,t,n){e.exports=n.p+"0b08562cf2ce3321b7576170efd4ce20.png"},function(e,t){e.exports={RIGHT_BUTTON:2,LEFT_BUTTON:0,COLORS:{black:"#000000",gray:"#404040",red:"#FF0000",blue:"#0000CC",white:"#FFFFFF",transparent:"#00000000",selectedTool:"rgb(219, 219, 219)"},RESOLUTIONS:{low:{cols:32,rows:32},medium:{cols:64,rows:64},high:{cols:128,rows:128}}}},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(a=r,o=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),"/*# ".concat(c," */")),s=r.sources.map(function(e){return"/*# sourceURL=".concat(r.sourceRoot).concat(e," */")});return[n].concat(s).concat([i]).join("\n")}var a,o,c;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2],"{").concat(n,"}"):n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var s=this[i][0];null!=s&&(r[s]=!0)}for(var a=0;a<e.length;a++){var o=e[a];null!=o[0]&&r[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="(".concat(o[2],") and (").concat(n,")")),t.push(o))}},t}},function(e,t,n){var r,i,s={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),o=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var r=function(e,t){return t?t.querySelector(e):document.querySelector(e)}.call(this,e,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}}(),c=null,l=0,p=[],d=n(13);function u(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=s[r.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](r.parts[a]);for(;a<r.parts.length;a++)i.parts.push(b(r.parts[a],t))}else{var o=[];for(a=0;a<r.parts.length;a++)o.push(b(r.parts[a],t));s[r.id]={id:r.id,refs:1,parts:o}}}}function h(e,t){for(var n=[],r={},i=0;i<e.length;i++){var s=e[i],a=t.base?s[0]+t.base:s[0],o={css:s[1],media:s[2],sourceMap:s[3]};r[a]?r[a].parts.push(o):n.push(r[a]={id:a,parts:[o]})}return n}function f(e,t){var n=o(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=p[p.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),p.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=o(e.insertAt.before,n);n.insertBefore(t,i)}}function g(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=p.indexOf(e);t>=0&&p.splice(t,1)}function m(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var r=function(){0;return n.nc}();r&&(e.attrs.nonce=r)}return v(t,e.attrs),f(e,t),t}function v(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function b(e,t){var n,r,i,s;if(t.transform&&e.css){if(!(s="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=s}if(t.singleton){var a=l++;n=c||(c=m(t)),r=x.bind(null,n,a,!1),i=x.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",v(t,e.attrs),f(e,t),t}(t),r=function(e,t,n){var r=n.css,i=n.sourceMap,s=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||s)&&(r=d(r));i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(a),o&&URL.revokeObjectURL(o)}.bind(null,n,t),i=function(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(t),r=function(e,t){var n=t.css,r=t.media;r&&e.setAttribute("media",r);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){g(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=h(e,t);return u(n,t),function(e){for(var r=[],i=0;i<n.length;i++){var a=n[i];(o=s[a.id]).refs--,r.push(o)}e&&u(h(e,t),t);for(i=0;i<r.length;i++){var o;if(0===(o=r[i]).refs){for(var c=0;c<o.parts.length;c++)o.parts[c]();delete s[o.id]}}}};var y,w=(y=[],function(e,t){return y[e]=t,y.filter(Boolean).join("\n")});function x(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=w(t,i);else{var s=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(s,a[t]):e.appendChild(s)}}},function(e,t,n){e.exports='<header>\n  <h1>Piskel-Clone</h1>\n  <div class="button" id="sign-in-or-out-button">sign in</div>\n</header>\n<main>\n  <div class="tools-wrapper" id="tools-wrapper">\n    <ul class="tool-picker">\n      <li id="pencil">\n        <img src="'+n(2)+'" alt="pencil-icon" class="tool-icon">\n        <span>(P)</span>\n      </li>\n      <li id="bucket">\n        <img src="'+n(3)+'" alt="bucket-icon" class="tool-icon">\n        <span>(B)</span>\n      </li>\n      <li id="samepixels">\n        <img src="'+n(14)+'" alt="samepixels-icon" class="tool-icon">\n        <span>(U)</span>\n      </li>\n      <li id="eraser">\n        <img src="'+n(4)+'" alt="eraser-icon" class="tool-icon">\n        <span>(E)</span>\n      </li>\n      <li id="picker">\n        <img src="'+n(5)+'" alt="pick-icon" class="tool-icon">\n        <span>(C)</span>\n      </li>\n      <li id="reset">\n        <img src="'+n(15)+'" alt="reset-icon" class="tool-icon">\n        <span>(R)</span>\n      </li>\n    </ul>\n    <ul class="color-picker">\n      <li id="current">\n        <input type="color" id="color-selector">\n        <input type="color" id="secondary-color-selector">\n      </li>\n      <li id="prev">\n        <div class="color-circle" id="prev-indicator"></div>\n      </li>\n      <li class="red" id="red">\n        <div class="color-circle"></div>\n      </li>\n      <li class="blue" id="blue">\n        <div class="color-circle"></div>\n      </li>\n    </ul>\n  </div>\n  <div class="canvas-wrapper" id="canvas-wrapper">\n    <div class="palette-background" id="palette-background">\n      <canvas class="palette" id="palette" width="512" height="512">\n        \x3c!-- fallback contect --\x3e\n        <p>canvas is not supported :(</p>\n      </canvas>\n    </div>\n    <div class="size-manager" id="size-manager">\n      <div id="button-wrapper">\n        <div><span>Canvas size:</span></div>\n        <div class="size-button" id="size32"> 32x32</div>\n        <div class="size-button size-button-selected" id="size64">64x64</div>\n        <div class="size-button" id="size128">128x128</div>\n      </div>\n      <span class= "coordinats" id="coordinats">[0, 0]</span>\n    </div>\n  </div>\n  <div class="preview-wrapper">\n    <div class="preview-box">\n      <h3>preview</h3>\n      <div class="preview-img-wrapper">\n        <img id="preview" alt="preview" width="250" height="250">\n      </div>\n      <br>\n      <div class="fps-range-wrapper" id="fps-rate-wrapper">\n        <span class="fps-indicator" id="fps-indicator">8 fps</span>\n        <input class="fps-range" id="fps-range" type="range" min="1" max="24" value="8">\n      </div>\n      <div class="frame-rate-wrapper" id="fps-wrapper">\n        <div class="fps-button" id="4fps">4fps</div>\n        <div class="fps-button" id="8fps">8fps</div>\n        <div class="fps-button" id="16fps">16fps</div>\n      </div>\n    </div>\n    <div class="button-wrapper">\n      <div class="play button" id="play">\n        <span>Play (A)</span>\n      </div>\n      <div class="fullscreen button" id="fullscreen">\n        <span>Full Screen (F)</span>\n      </div>\n      <div class="gif-save button" id="gif-save">\n        <span>Save .gif (G)</span>\n      </div>\n      <div class="apng-save button" id="apng-save">\n        <span>Save .apng (N)</span>\n      </div>\n      <div class="load button" id="load">\n        <span>Load .piscelc (L)</span>\n      </div>\n      <div class="save button" id="save">\n        <span>Save .piscelc (S)</span>\n      </div>\n      <div class="local-load button" id="local-load">\n        <span>from LocalStorage (O)</span>\n      </div>\n      <div class="local-save button" id="local-save">\n        <span>to LocalStorage (T)</span>\n      </div>\n        <input type="file" name="file" class="open-file-button" id="open-file">\n      </div>\n    </div>\n  </div>\n</main>\n'},function(e,t,n){e.exports='<div class="frame-control" id="frame-control">\r\n    <div class="new frame" id="new-frame">\r\n      <img src="'+n(17)+'" alt="new">\r\n      <span>new frame</span>\r\n    </div>\r\n</div>\r\n'},function(e,t,n){var r=n(12);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(8)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(7)(!1)).push([e.i,"* {\n  box-sizing: border-box;\n  font-family: Arial, Helvetica, sans-serif;\n  margin: 0px;\n  padding: 0px;\n  user-select: none;\n  -webkit-user-drag: none; }\n\nbody {\n  background: #f0f0f0;\n  color: black; }\n\nheader {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 5vh;\n  -webkit-box-shadow: 3px 4px 8px -2px #545454;\n  -moz-box-shadow: 3px 4px 8px -2px #545454;\n  box-shadow: 3px 4px 8px -2px #545454;\n  background: white; }\n\nmain {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: space-around;\n  align-content: center;\n  margin-top: 3.5vh; }\n\n.tools-wrapper {\n  margin: 0vh 1vw; }\n\n.palette-background {\n  box-sizing: content-box;\n  position: relative;\n  text-align: center;\n  background-color: #b9b9b9;\n  background-image: linear-gradient(45deg, gray 25%, transparent 25%, transparent 74%, gray 75%, gray), linear-gradient(45deg, gray 25%, transparent 25%, transparent 74%, gray 75%, gray);\n  background-size: 16px 16px;\n  background-position: 0px 0px, 8px 8px;\n  height: 512px;\n  width: 512px;\n  border: 2px solid gray; }\n\n.palette {\n  height: 100%; }\n\n.preview-box {\n  padding: 1vh;\n  margin: 0 auto;\n  text-align: center;\n  background: white; }\n\n.preview-img-wrapper {\n  background-color: #b9b9b9;\n  background-image: linear-gradient(45deg, gray 25%, transparent 25%, transparent 74%, gray 75%, gray), linear-gradient(45deg, gray 25%, transparent 25%, transparent 74%, gray 75%, gray);\n  background-size: 16px 16px;\n  background-position: 0px 0px, 8px 8px;\n  height: 250px; }\n\n.preview-box input {\n  width: 80%; }\n\n.preview-box h3 {\n  padding: 0px;\n  margin: 1vw; }\n\n.frame-rate-wrapper {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-around;\n  width: 100%;\n  padding: 1vh; }\n\n.fps-range-wrapper {\n  display: flex;\n  justify-content: space-around;\n  padding: 5px 0px; }\n\n.fps-range {\n  width: 190px !important;\n  background: skyblue; }\n\n.fps-button {\n  transition: all 0.07s;\n  text-align: center;\n  background: black;\n  color: #e2e2e2;\n  border-radius: 20px;\n  height: 25px;\n  width: 60px;\n  padding: 3px;\n  cursor: pointer; }\n\n.fps-button:hover {\n  transform: scale(1.08); }\n\n.fps-button:active {\n  transform: scale(1); }\n\n.preview-box, .frame-control, .new-frame, .frame, .button {\n  -webkit-box-shadow: 3px 4px 8px -2px #545454;\n  -moz-box-shadow: 3px 4px 8px -2px #545454;\n  box-shadow: 3px 4px 8px -2px #545454; }\n\n.new {\n  cursor: pointer;\n  height: 70px;\n  font-size: 16pt;\n  padding: 10px;\n  background: #afafaf; }\n\n.new img {\n  display: inline-block;\n  padding-bottom: 8px; }\n\n.new span {\n  display: inline-block;\n  height: 100%;\n  width: 60%; }\n\n.button-wrapper {\n  display: flex;\n  flex-wrap: wrap;\n  width: 26vw; }\n\n.button {\n  transition: all, 0.06s;\n  text-align: center;\n  margin: 1vh 0.3vw;\n  font-size: 12pt;\n  padding: 0.6vh;\n  background: skyblue;\n  cursor: pointer; }\n  .button:hover {\n    transform: scale(1.03);\n    background: #6cd5ff; }\n  .button:active {\n    transform: scale(1);\n    background: skyblue; }\n\nh1 {\n  flex-grow: 1;\n  font-size: 3vh;\n  padding-left: 1vw;\n  padding-top: 2px; }\n\n.tool-picker, .color-picker {\n  cursor: pointer;\n  list-style-type: none;\n  color: gray;\n  width: 6.5vw;\n  margin: 0px 6% 15%;\n  background: white;\n  -webkit-box-shadow: 3px 4px 8px -2px #545454;\n  -moz-box-shadow: 3px 4px 8px -2px #545454;\n  box-shadow: 3px 4px 8px -2px #545454; }\n\n.tool-picker li, .color-picker li {\n  padding: 1.5vh 0px 2vh 1vw; }\n\n.tool-picker li:hover, .color-picker li:hover {\n  background: #dbdbdb; }\n\n.tool-picker li:active, .color-picker li:active {\n  color: #141414; }\n\n.tool-picker span, .color-picker span {\n  display: inline-block;\n  margin: 0px 0px 0px 7%; }\n\n.color-circle {\n  display: inline-block;\n  height: 15px;\n  width: 15px;\n  border: 1px solid black;\n  border-radius: 100%; }\n\n.red div {\n  background: red; }\n\n.blue div {\n  background: blue; }\n\n.size-manager {\n  display: flex;\n  justify-content: space-between;\n  text-align: right;\n  color: #494949; }\n  .size-manager div {\n    margin: 3px;\n    display: flex; }\n\n.size-button {\n  background: #c4c4c4;\n  border-radius: 3px;\n  padding: 2px; }\n  .size-button:hover {\n    cursor: pointer;\n    color: black; }\n  .size-button:active {\n    cursor: pointer;\n    color: gray; }\n\n.size-button-selected {\n  color: gray !important; }\n  .size-button-selected:hover {\n    cursor: inherit !important;\n    color: gray !important; }\n\n.coordinats {\n  text-align: right;\n  margin: 3px; }\n\n.open-file-button {\n  display: none; }\n",""])},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i,s=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(s)?e:(i=0===s.indexOf("//")?s:0===s.indexOf("/")?n+s:r+s.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(e,t,n){e.exports=n.p+"3a27935d38c705d69f299bd23a5acc2c.png"},function(e,t,n){e.exports=n.p+"60f305de56a834c2a460134f8c10291d.png"},function(e,t){var n=window.gapi=window.gapi||{};n._bs=(new Date).getTime(),function(){var e=function(){this.g=""};e.prototype.toString=function(){return"SafeScript{"+this.g+"}"},e.prototype.a=function(e){this.g=e},(new e).a("");var t=function(){this.j=""};t.prototype.toString=function(){return"SafeStyle{"+this.j+"}"},t.prototype.a=function(e){this.j=e},(new t).a("");var n=function(){this.i=""};n.prototype.toString=function(){return"SafeStyleSheet{"+this.i+"}"},n.prototype.a=function(e){this.i=e},(new n).a("");var r=function(){this.f=""};r.prototype.toString=function(){return"SafeHtml{"+this.f+"}"},r.prototype.a=function(e){this.f=e},(new r).a("<!DOCTYPE html>"),(new r).a(""),(new r).a("<br>");var i,s=window,a=document,o=s.location,c=function(){},l=/\[native code\]/,p=function(e,t,n){return e[t]=e[t]||n},d=function(){var e;if((e=Object.create)&&l.test(e))e=e(null);else for(var t in e={})e[t]=void 0;return e},u=p(s,"gapi",{});i=p(s,"___jsl",d()),p(i,"I",0),p(i,"hel",10);var h=function(){var e=o.href;if(i.dpo)var t=i.h;else{t=i.h;if(e=e&&(/([#].*&|[#])jsh=([^&#]*)/g.exec(e)||/([?#].*&|[?#])jsh=([^&#]*)/g.exec(e)))try{t=decodeURIComponent(e[2])}catch(e){}}return t},f=function(e){return p(p(i,"H",d()),e,d())},g=p(i,"perf",d()),m=p(g,"g",d()),v=p(g,"i",d());p(g,"r",[]),d(),d();var b=function(e,t,n){var r=g.r;"function"==typeof r?r(e,t,n):r.push([e,t,n])},y=function(e,t,n){t&&0<t.length&&(t=w(t),n&&0<n.length&&(t+="___"+w(n)),28<t.length&&(t=t.substr(0,28)+(t.length-28)),n=t,t=p(v,"_p",d()),p(t,n,d())[e]=(new Date).getTime(),b(e,"_p",n))},w=function(e){return e.join("__").replace(/\./g,"_").replace(/\-/g,"_").replace(/,/g,"_")},x=d(),B=[],C=function(e){throw Error("Bad hint"+(e?": "+e:""))};B.push(["jsl",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=e[t];"object"==typeof n?i[t]=p(i,t,[]).concat(n):p(i,t,n)}(t=e.u)&&((e=p(i,"us",[])).push(t),(t=/^https:(.*)$/.exec(t))&&e.push("http:"+t[1]))}]);var E=/^(\/[a-zA-Z0-9_\-]+)+$/,k=[/\/amp\//,/\/amp$/,/^\/amp$/],D=/^[a-zA-Z0-9\-_\.,!]+$/,F=/^gapi\.loaded_[0-9]+$/,A=/^[a-zA-Z0-9,._-]+$/,S=function(e){"/"!==e.charAt(0)&&C("relative path");for(var t=e.substring(1).split("/"),n=[];t.length;){if((e=t.shift()).length&&0!=e.indexOf(".")){if(0<e.indexOf("=")){t.unshift(e);break}}else C("empty/relative directory");n.push(e)}e={};for(var r=0,i=t.length;r<i;++r){var s=t[r].split("="),a=decodeURIComponent(s[0]),o=decodeURIComponent(s[1]);2==s.length&&a&&o&&(e[a]=e[a]||o)}for(t="/"+n.join("/"),E.test(t)||C("invalid_prefix"),n=0,r=k.length;n<r;++n)k[n].test(t)&&C("invalid_prefix");return{pathPrefix:t,version:n=I(e,"k",!0),b:r=I(e,"am"),l:i=I(e,"rs"),o:e=I(e,"t")}},_=function(e){for(var t=[],n=0,r=e.length;n<r;++n){var i=e[n].replace(/\./g,"_").replace(/-/g,"_");A.test(i)&&t.push(i)}return t.join(",")},I=function(e,t,n){if(!(e=e[t])&&n&&C("missing: "+t),e){if(D.test(e))return e;C("invalid: "+t)}return null},O=/^https?:\/\/[a-z0-9_.-]+\.google(rs)?\.com(:\d+)?\/[a-zA-Z0-9_.,!=\-\/]+$/,L=/\/cb=/g,T=/\/\//g;x.m=function(e,t,n,r){return(e=e[0])||C("missing_hint"),"https://apis.google.com"+function(e,t,n,r){e=S(e),F.test(n)||C("invalid_callback"),t=_(t),r=r&&r.length?_(r):null;var i=function(e){return encodeURIComponent(e).replace(/%2C/g,",")};return[encodeURIComponent(e.pathPrefix).replace(/%2C/g,",").replace(/%2F/g,"/"),"/k=",i(e.version),"/m=",i(t),r?"/exm="+i(r):"","/rt=j/sv=1/d=1/ed=1",e.b?"/am="+i(e.b):"",e.l?"/rs="+i(e.l):"",e.o?"/t="+i(e.o):"","/cb=",i(n)].join("")}(e,t,n,r)};var R=decodeURI("%73cript"),z=/^[-+_0-9\/A-Za-z]+={0,2}$/,M=function(e,t){for(var n=[],r=0;r<e.length;++r){var i,s=e[r];if(i=s){e:{for(i=0;i<t.length;i++)if(t[i]===s)break e;i=-1}i=0>i}i&&n.push(s)}return n},N=function(){var e=i.nonce;return void 0!==e?e&&e===String(e)&&e.match(z)?e:i.nonce=null:a.querySelector&&(e=a.querySelector("script[nonce]"))?(e=e.nonce||e.getAttribute("nonce")||"")&&e===String(e)&&e.match(z)?i.nonce=e:i.nonce=null:null},U=function(e){var t=a.createElement(R);t.setAttribute("src",e),null!==(e=N())&&t.setAttribute("nonce",e),t.async="true",(e=a.getElementsByTagName(R)[0])?e.parentNode.insertBefore(t,e):(a.head||a.body||a.documentElement).appendChild(t)},j=function(e,t){var n=t||{};"function"==typeof t&&((n={}).callback=t),function(e,t){var n=t&&t._c;if(n)for(var r=0;r<B.length;r++){var i=B[r][0],s=B[r][1];s&&Object.prototype.hasOwnProperty.call(n,i)&&s(n[i],e,t)}}(e,n),t=e?e.split(":"):[];var r=n.h||function(){var e=h();if(!e)throw Error("Bad hint");return e}(),s=p(i,"ah",d());if(s["::"]&&t.length){e=[];for(var a=null;a=t.shift();){var o=a.split(".");o=s[a]||s[o[1]&&"ns:"+o[0]||""]||r;var c=e.length&&e[e.length-1]||null,l=c;c&&c.hint==o||(l={hint:o,c:[]},e.push(l)),l.c.push(a)}var u=e.length;if(1<u){var f=n.callback;f&&(n.callback=function(){0==--u&&f()})}for(;t=e.shift();)$(t.c,n,t.hint)}else $(t||[],n,r)},$=function(e,t,n){e=function(e){e=e.sort();for(var t=[],n=void 0,r=0;r<e.length;r++){var i=e[r];i!=n&&t.push(i),n=i}return t}(e)||[];var r=t.callback,o=t.config,l=t.timeout,g=t.ontimeout,m=t.onerror,v=void 0;"function"==typeof m&&(v=m);var b=null,w=!1;if(l&&!g||!l&&g)throw"Timeout requires both the timeout parameter and ontimeout parameter to be set";m=p(f(n),"r",[]).sort();var B=p(f(n),"L",[]).sort(),E=[].concat(m),k=function(e,t){if(w)return 0;s.clearTimeout(b),B.push.apply(B,D);var r=((u||{}).config||{}).update;if(r?r(o):o&&p(i,"cu",[]).push(o),t){y("me0",e,E);try{!function(e,t,n){P(function(){var n=t===h()?p(u,"_",d()):d();n=p(f(t),"_",n),e(n)},n)}(t,n,v)}finally{y("me1",e,E)}}return 1};0<l&&(b=s.setTimeout(function(){w=!0,g()},l));var D=M(e,B);if(D.length){D=M(e,m);var F=p(i,"CP",[]),A=F.length;if(F[A]=function(e){if(!e)return 0;y("ml1",D,E);var t=function(t){F[A]=null,k(D,e)&&function(e){var t=p(i,"PQ",[]);i.PQ=[];var n=t.length;if(0===n)e();else for(var r=0,s=function(){++r===n&&e()},a=0;a<n;a++)t[a](s)}(function(){r&&r(),t()})},n=function(){var e=F[A+1];e&&e()};0<A&&F[A-1]?F[A]=function(){t(n)}:t(n)},D.length){var S="loaded_"+i.I++;u[S]=function(e){F[A](e),u[S]=null},e=function(e,t,n,r){var i=e.split(";"),s=i.shift(),a=x[s],o=null;return a?o=a(i,t,n,r):C("no hint processor for: "+s),o||C("failed to generate load url"),n=(t=o).match(T),(r=t.match(L))&&1===r.length&&O.test(t)&&n&&1===n.length||C("failed sanity: "+e),o}(n,D,"gapi."+S,m),m.push.apply(m,D),y("ml0",D,E),t.sync||s.___gapisync?function(e){if("loading"!=a.readyState)U(e);else{var t=N(),n="";null!==t&&(n=' nonce="'+t+'"'),e="<"+R+' src="'+encodeURI(e)+'"'+n+"></"+R+">",a.write(e)}}(e):U(e)}else F[A](c)}else k(D)&&r&&r()},P=function(e,t){if(i.hee&&0<i.hel)try{return e()}catch(e){t&&t(e),i.hel--,j("debug_error",function(){try{window.___jsl.hefn(e)}catch(t){throw e}})}else try{return e()}catch(e){throw t&&t(e),e}};u.load=function(e,t){return P(function(){return j(e,t)})},m.bs0=window.gapi._bs||(new Date).getTime(),b("bs0"),m.bs1=(new Date).getTime(),b("bs1"),delete window.gapi._bs}.call(this),n.load("",{callback:window.gapi_onload,_c:{jsl:{ci:{deviceType:"desktop","oauth-flow":{authUrl:"https://accounts.google.com/o/oauth2/auth",proxyUrl:"https://accounts.google.com/o/oauth2/postmessageRelay",disableOpt:!0,idpIframeUrl:"https://accounts.google.com/o/oauth2/iframe",usegapi:!1},debug:{reportExceptionRate:.05,forceIm:!1,rethrowException:!1,host:"https://apis.google.com"},enableMultilogin:!0,"googleapis.config":{auth:{useFirstPartyAuthV2:!0}},isPlusUser:!1,inline:{css:1},disableRealtimeCallback:!1,drive_share:{skipInitCommand:!0},csi:{rate:.01},client:{cors:!1},isLoggedIn:!0,signInDeprecation:{rate:0},include_granted_scopes:!0,llang:"en",iframes:{youtube:{params:{location:["search","hash"]},url:":socialhost:/:session_prefix:_/widget/render/youtube?usegapi=1",methods:["scroll","openwindow"]},ytsubscribe:{url:"https://www.youtube.com/subscribe_embed?usegapi=1"},plus_circle:{params:{url:""},url:":socialhost:/:session_prefix::se:_/widget/plus/circle?usegapi=1"},plus_share:{params:{url:""},url:":socialhost:/:session_prefix::se:_/+1/sharebutton?plusShare=true&usegapi=1"},rbr_s:{params:{url:""},url:":socialhost:/:session_prefix::se:_/widget/render/recobarsimplescroller"},":source:":"3p",playemm:{url:"https://play.google.com/work/embedded/search?usegapi=1&usegapi=1"},savetoandroidpay:{url:"https://pay.google.com/gp/v/widget/save"},blogger:{params:{location:["search","hash"]},url:":socialhost:/:session_prefix:_/widget/render/blogger?usegapi=1",methods:["scroll","openwindow"]},evwidget:{params:{url:""},url:":socialhost:/:session_prefix:_/events/widget?usegapi=1"},partnersbadge:{url:"https://www.gstatic.com/partners/badge/templates/badge.html?usegapi=1"},dataconnector:{url:"https://dataconnector.corp.google.com/:session_prefix:ui/widgetview?usegapi=1"},surveyoptin:{url:"https://www.google.com/shopping/customerreviews/optin?usegapi=1"},":socialhost:":"https://apis.google.com",shortlists:{url:""},hangout:{url:"https://talkgadget.google.com/:session_prefix:talkgadget/_/widget"},plus_followers:{params:{url:""},url:":socialhost:/_/im/_/widget/render/plus/followers?usegapi=1"},post:{params:{url:""},url:":socialhost:/:session_prefix::im_prefix:_/widget/render/post?usegapi=1"},":gplus_url:":"https://plus.google.com",signin:{params:{url:""},url:":socialhost:/:session_prefix:_/widget/render/signin?usegapi=1",methods:["onauth"]},rbr_i:{params:{url:""},url:":socialhost:/:session_prefix::se:_/widget/render/recobarinvitation"},donation:{url:"https://onetoday.google.com/home/donationWidget?usegapi=1"},share:{url:":socialhost:/:session_prefix::im_prefix:_/widget/render/share?usegapi=1"},plusone:{params:{count:"",size:"",url:""},url:":socialhost:/:session_prefix::se:_/+1/fastbutton?usegapi=1"},comments:{params:{location:["search","hash"]},url:":socialhost:/:session_prefix:_/widget/render/comments?usegapi=1",methods:["scroll","openwindow"]},":im_socialhost:":"https://plus.googleapis.com",backdrop:{url:"https://clients3.google.com/cast/chromecast/home/widget/backdrop?usegapi=1"},visibility:{params:{url:""},url:":socialhost:/:session_prefix:_/widget/render/visibility?usegapi=1"},autocomplete:{params:{url:""},url:":socialhost:/:session_prefix:_/widget/render/autocomplete"},additnow:{url:"https://apis.google.com/marketplace/button?usegapi=1",methods:["launchurl"]},":signuphost:":"https://plus.google.com",ratingbadge:{url:"https://www.google.com/shopping/customerreviews/badge?usegapi=1"},appcirclepicker:{url:":socialhost:/:session_prefix:_/widget/render/appcirclepicker"},follow:{url:":socialhost:/:session_prefix:_/widget/render/follow?usegapi=1"},community:{url:":ctx_socialhost:/:session_prefix::im_prefix:_/widget/render/community?usegapi=1"},sharetoclassroom:{url:"https://www.gstatic.com/classroom/sharewidget/widget_stable.html?usegapi=1"},ytshare:{params:{url:""},url:":socialhost:/:session_prefix:_/widget/render/ytshare?usegapi=1"},plus:{url:":socialhost:/:session_prefix:_/widget/render/badge?usegapi=1"},family_creation:{params:{url:""},url:"https://families.google.com/webcreation?usegapi=1&usegapi=1"},commentcount:{url:":socialhost:/:session_prefix:_/widget/render/commentcount?usegapi=1"},configurator:{url:":socialhost:/:session_prefix:_/plusbuttonconfigurator?usegapi=1"},zoomableimage:{url:"https://ssl.gstatic.com/microscope/embed/"},appfinder:{url:"https://gsuite.google.com/:session_prefix:marketplace/appfinder?usegapi=1"},savetowallet:{url:"https://pay.google.com/gp/v/widget/save"},person:{url:":socialhost:/:session_prefix:_/widget/render/person?usegapi=1"},savetodrive:{url:"https://drive.google.com/savetodrivebutton?usegapi=1",methods:["save"]},page:{url:":socialhost:/:session_prefix:_/widget/render/page?usegapi=1"},card:{url:":socialhost:/:session_prefix:_/hovercard/card"}}},h:"m;/_/scs/apps-static/_/js/k=oz.gapi.en.y5hhWjOdu80.O/am=wQE/d=1/rs=AGLTcCNsKzxWFhezE2KkFP7auTmVDBiNEQ/m=__features__",u:"https://apis.google.com/js/api.js",hee:!0,fp:"022853cbe6e85d177a0c3bee60e36925e44c0f39",dpo:!1},fp:"022853cbe6e85d177a0c3bee60e36925e44c0f39",annotation:["interactivepost","recobar","signin2","autocomplete","profile"],bimodal:["signin","share"]}})},function(e,t,n){e.exports=n.p+"551d8c76aee47b0bb8adaee8defd04ea.png"},function(e,t,n){var r=n(19);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(8)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(7)(!1);var r=n(20),i=r(n(21)),s=r(n(22)),a=r(n(23));t.push([e.i,".frame-control {\n  width: 155px;\n  min-width: 100px;\n  height: 82vh;\n  padding: 0vh 1vw 0vh 0vh;\n  color: #363636;\n  overflow: scroll;\n  background: white; }\n\n.frame-control::-webkit-scrollbar {\n  width: 12px; }\n\n.frame-control::-webkit-scrollbar-track {\n  background: #bbbbbb; }\n\n.frame-control::-webkit-scrollbar-thumb {\n  background: #555; }\n\n.frame {\n  position: relative;\n  transition: all 0.09s;\n  height: 110px;\n  width: 90%;\n  margin: 1vw;\n  font-size: 18pt;\n  text-align: center;\n  flex-basis: 100%;\n  border: 2px solid #575757;\n  cursor: pointer; }\n\n.frame-preview {\n  background-color: #b9b9b9;\n  background-image: linear-gradient(45deg, gray 25%, transparent 25%, transparent 74%, gray 75%, gray), linear-gradient(45deg, gray 25%, transparent 25%, transparent 74%, gray 75%, gray);\n  background-size: 16px 16px;\n  background-position: 0px 0px, 8px 8px;\n  height: 100%;\n  width: 100%; }\n\n.copy-frame, .frame-number, .move-frame, .delete-frame {\n  position: absolute;\n  height: 30px;\n  width: 30px;\n  border: 1px solid #2b2b2b;\n  padding: 1px;\n  margin: 2px;\n  color: #2e2e2e; }\n\n.copy-frame:hover, .move-frame:hover, .delete-frame:hover {\n  transform: scale(1.1);\n  transform: translateY(); }\n\n.frame-number {\n  top: 0px;\n  left: 0px;\n  background: #afafaf; }\n\n.delete-frame {\n  top: 0px;\n  right: 0px;\n  cursor: pointer;\n  background: url("+i+"), #afafaf;\n  background-repeat: no-repeat;\n  background-size: auto;\n  background-position: center; }\n\n.move-frame {\n  bottom: 0px;\n  left: 0px;\n  cursor: move;\n  background: url("+s+"), #afafaf;\n  background-repeat: no-repeat;\n  background-size: auto;\n  background-position: center; }\n\n.copy-frame {\n  bottom: 0px;\n  right: 0px;\n  cursor: pointer;\n  background: url("+a+"), #afafaf;\n  background-repeat: no-repeat;\n  background-size: auto;\n  background-position: center; }\n\n.new {\n  height: 80px; }\n  .new :hover {\n    transform: scale(1.05); }\n  .new :active {\n    transform: scale(1); }\n",""])},function(e,t,n){"use strict";e.exports=function(e,t){return"string"!=typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),/["'() \t\n]/.test(e)||t?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},function(e,t,n){e.exports=n.p+"cc51afdfc4c98b6b41f721212f970778.png"},function(e,t,n){e.exports=n.p+"932714910dfd17b80b017bbe53cc2dbb.png"},function(e,t,n){e.exports=n.p+"119c969dfa6907c79941cdafa4759802.png"},function(e,t){LZWEncoder=function(){const e={};let t,n,r,i,s,a;let o;let c;const l=[],p=[];let d,u,h,f=0,g=!1,m=0,v=0;const b=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];let y;const w=[],x=e.LZWEncoder=function(e,s,a,o){t=e,n=s,r=a,i=Math.max(2,o)},B=function(e,t){w[y++]=e,y>=254&&D(t)},C=function(e){E(5003),f=u+2,g=!0,S(u,e)};var E=function(e){for(let t=0;t<e;++t)l[t]=-1};const k=e.compress=function(e,t){let n,r,i,s,a,m,v;for(g=!1,c=F(o=d=e),h=(u=1<<e-1)+1,f=u+2,y=0,s=A(),v=0,n=5003;n<65536;n*=2)++v;v=8-v,m=5003,E(5003),S(u,t);e:for(;-1!=(i=A());)if(n=(i<<12)+s,l[r=i<<v^s]!=n){if(l[r]>=0){a=5003-r,0===r&&(a=1);do{if((r-=a)<0&&(r+=5003),l[r]==n){s=p[r];continue e}}while(l[r]>=0)}S(s,t),s=i,f<4096?(p[r]=f++,l[r]=n):C(t)}else s=p[r];S(s,t),S(h,t)};e.encode=function(e){e.writeByte(i),s=t*n,a=0,k(i+1,e),e.writeByte(0)};var D=function(e){y>0&&(e.writeByte(y),e.writeBytes(w,0,y),y=0)},F=function(e){return(1<<e)-1},A=function(){if(0===s)return-1;return--s,255&r[a++]},S=function(e,t){for(m&=b[v],v>0?m|=e<<v:m=e,v+=o;v>=8;)B(255&m,t),m>>=8,v-=8;if((f>c||g)&&(g?(c=F(o=d),g=!1):c=12==++o?4096:F(o)),e==h){for(;v>0;)B(255&m,t),m>>=8,v-=8;D(t)}};return x.apply(this,arguments),e}},function(e,t){NeuQuant=function(){const e={};let t;let n,r,i,s;const a=[],o=[],c=[],l=[],p=e.NeuQuant=function(e,t,a){let l,p;for(n=e,r=t,i=a,s=new Array(256),l=0;l<256;l++)s[l]=new Array(4),(p=s[l])[0]=p[1]=p[2]=(l<<12)/256,c[l]=256,o[l]=0};e.map=function(e,t,n){let r,i,o,c,l,p,d;for(l=1e3,d=-1,i=(r=a[t])-1;r<256||i>=0;)r<256&&((o=(p=s[r])[1]-t)>=l?r=256:(r++,o<0&&(o=-o),(c=p[0]-e)<0&&(c=-c),(o+=c)<l&&((c=p[2]-n)<0&&(c=-c),(o+=c)<l&&(l=o,d=p[3])))),i>=0&&((o=t-(p=s[i])[1])>=l?i=-1:(i--,o<0&&(o=-o),(c=p[0]-e)<0&&(c=-c),(o+=c)<l&&((c=p[2]-n)<0&&(c=-c),(o+=c)<l&&(l=o,d=p[3]))));return d},e.process=function(){return function(){let e,s,a,o,c,p,d,g,m,v,b,y,w,x;for(r<1509&&(i=1),t=30+(i-1)/3,y=n,w=0,x=r,v=(b=r/(3*i))/100|0,g=1024,(d=(p=2048)>>6)<=1&&(d=0),e=0;e<d;e++)l[e]=g*(256*(d*d-e*e)/(d*d));for(m=r<1509?3:r%499!=0?1497:r%491!=0?1473:r%487!=0?1461:1509,e=0;e<b;)if(a=(255&y[w+0])<<4,o=(255&y[w+1])<<4,c=(255&y[w+2])<<4,s=f(a,o,c),h(g,s,a,o,c),0!==d&&u(d,s,a,o,c),(w+=m)>=x&&(w-=r),0===v&&(v=1),++e%v==0)for(g-=g/t,(d=(p-=p/30)>>6)<=1&&(d=0),s=0;s<d;s++)l[s]=g*(256*(d*d-s*s)/(d*d))}(),d(),function(){let e,t,n,r,i,o,c,l;for(c=0,l=0,e=0;e<256;e++){for(n=e,r=(i=s[e])[1],t=e+1;t<256;t++)(o=s[t])[1]<r&&(n=t,r=o[1]);if(o=s[n],e!=n&&(t=o[0],o[0]=i[0],i[0]=t,t=o[1],o[1]=i[1],i[1]=t,t=o[2],o[2]=i[2],i[2]=t,t=o[3],o[3]=i[3],i[3]=t),r!=c){for(a[c]=l+e>>1,t=c+1;t<r;t++)a[t]=e;c=r,l=e}}for(a[c]=l+255>>1,t=c+1;t<256;t++)a[t]=255}(),function(){const e=[],t=new Array(256);for(let e=0;e<256;e++)t[s[e][3]]=e;let n=0;for(let r=0;r<256;r++){const i=t[r];e[n++]=s[i][0],e[n++]=s[i][1],e[n++]=s[i][2]}return e}()};var d=function(){let e;for(e=0;e<256;e++)s[e][0]>>=4,s[e][1]>>=4,s[e][2]>>=4,s[e][3]=e},u=function(e,t,n,r,i){let a,o,c,p,d,u,h;for((c=t-e)<-1&&(c=-1),(p=t+e)>256&&(p=256),a=t+1,o=t-1,u=1;a<p||o>c;){if(d=l[u++],a<p){h=s[a++];try{h[0]-=d*(h[0]-n)/(1<<18),h[1]-=d*(h[1]-r)/(1<<18),h[2]-=d*(h[2]-i)/(1<<18)}catch(e){}}if(o>c){h=s[o--];try{h[0]-=d*(h[0]-n)/(1<<18),h[1]-=d*(h[1]-r)/(1<<18),h[2]-=d*(h[2]-i)/(1<<18)}catch(e){}}}},h=function(e,t,n,r,i){const a=s[t];a[0]-=e*(a[0]-n)/1024,a[1]-=e*(a[1]-r)/1024,a[2]-=e*(a[2]-i)/1024},f=function(e,t,n){let r,i,a,l,p,d,u,h,f,g;for(f=h=~(1<<31),u=d=-1,r=0;r<256;r++)(i=(g=s[r])[0]-e)<0&&(i=-i),(a=g[1]-t)<0&&(a=-a),i+=a,(a=g[2]-n)<0&&(a=-a),(i+=a)<h&&(h=i,d=r),(l=i-(o[r]>>12))<f&&(f=l,u=r),p=c[r]>>10,c[r]-=p,o[r]+=p<<10;return c[d]+=64,o[d]-=65536,u};return p.apply(this,arguments),e}},function(e,t,n){"use strict";n.r(t);n(11);var r=n(9),i=n.n(r),s=n(2),a=n.n(s),o=n(3),c=n.n(o),l=n(5),p=n.n(l),d=n(4),u=n.n(d),h=e=>{e.bucketClick=()=>{e.tool="bucket",e.cleanTools(),e.bucket.style.background=e.COLORS.selectedTool,e.canvas.style.cursor=`url(${c.a}) 4 8, auto`},e.samepixelsClick=()=>{e.tool="samepixels",e.cleanTools(),e.samepixels.style.background=e.COLORS.selectedTool,e.canvas.style.cursor=`url(${c.a}) 4 8, auto`},e.pencilClick=()=>{e.tool="pencil",e.cleanTools(),e.color=e.colorSelector.value,e.pencil.style.background=e.COLORS.selectedTool,e.canvas.style.cursor=`url(${a.a}) 0 30, auto`},e.pickerClick=()=>{e.tool="picker",e.cleanTools(),e.picker.style.background=e.COLORS.selectedTool,e.canvas.style.cursor=`url(${p.a}) 0 30, auto`},e.resetClick=()=>{e.animating&&e.play(),e.frames[e.currentFrame].reset()},e.eraserClick=()=>{e.tool="eraser",e.cleanTools(),e.eraser.style.background=e.COLORS.selectedTool,e.canvas.style.cursor=`url(${u.a}) 0 30, auto`,e.color=e.COLORS.transparent},e.canvasClick=t=>{t.preventDefault(),e.animating&&e.play(),e.frames[e.currentFrame].click(t)},e.canvasMouseDown=t=>{e.animating&&(e.play(),t.stopPropagation()),e.frames[e.currentFrame].mouseDown(t)},e.keyHandler=t=>{switch(t.code){case"KeyB":e.bucketClick();break;case"KeyU":e.samepixelsClick();break;case"KeyP":e.pencilClick();break;case"KeyE":e.eraserClick();break;case"KeyR":e.resetClick();break;case"KeyA":e.play();break;case"KeyF":e.full();break;case"KeyS":e.frameManager.saveToFile();break;case"KeyL":e.fileInput.click();break;case"KeyO":e.frameManager.loadFromLocalStorage();break;case"KeyT":e.frameManager.saveToLocalStorage();break;case"KeyG":e.frameManager.saveToGif();break;case"KeyN":e.frameManager.saveToApng()}},e.bodyMouseUp=t=>{"palette"!==t.target.id&&(e.canvas.onmouseup=null,e.canvas.onmousemove=null)},e.selectColor=()=>{e.changeColor(e.colorSelector.value)},e.selectSecondaryColor=()=>{e.changeSecondaryColor(e.secondaryColorSelector.value)},e.fpsClick=t=>{t&&("4fps"===t.target.id&&e.setFps(4),"8fps"===t.target.id&&e.setFps(8),"16fps"===t.target.id&&e.setFps(16)),e.animating&&(e.play(),e.play()),e.playPreview()},e.fpsChange=()=>{e.setFps(document.getElementById("fps-range").value)},e.sizeManagerClick=t=>{if("size"===t.target.id.slice(0,4)){const n=+t.target.id.slice(4);n!==e.currentResolution.cols&&(e.frameManager.resizePalette(n),document.getElementById("size32").classList.remove("size-button-selected"),document.getElementById("size64").classList.remove("size-button-selected"),document.getElementById("size128").classList.remove("size-button-selected"),t.target.classList.add("size-button-selected"))}},e.fileInputHandler=t=>{const n=new FileReader;n.onloadend=t=>{if(t.target.readyState===FileReader.DONE){const n=t.target.result,r=JSON.parse(n);e.frameManager.loadProject(r)}},n.readAsBinaryString(t.target.files[0])}},f=(n(16),e=>{e.cleanTools=()=>{e.bucket.style.background=e.COLORS.transparent,e.samepixels.style.background=e.COLORS.transparent,e.pencil.style.background=e.COLORS.transparent,e.picker.style.background=e.COLORS.transparent,e.eraser.style.background=e.COLORS.transparent,e.reset.style.background=e.COLORS.transparent},e.setFps=t=>{e.fps=t,e.animating&&(e.play(),e.play()),e.playPreview(),document.getElementById("fps-range").value=e.fps,document.getElementById("fps-indicator").innerHTML=`${e.fps} fps`},e.fpsChange=()=>{e.setFps(document.getElementById("fps-range").value)},e.changeColor=t=>{if(t!==e.color&&e.newColor!==e.COLORS.transparent){const n=e.color;e.color=t!==e.COLORS.transparent?t:e.COLORS.white,e.prevColor=n}e.prevInd.style.background=e.prevColor,document.getElementById("color-selector").value=e.color},e.changeSecondaryColor=t=>{if(t!==e.secondaryColor&&e.newColor!==e.COLORS.transparent){const n=e.secondaryColor;e.secondaryColor=t!==e.COLORS.transparent?t:e.COLORS.white,e.prevColor=n}e.prevInd.style.background=e.prevColor,e.secondaryColorSelector.value=e.secondaryColor},e.animate=()=>{e.currentFrame+=1,e.currentFrame===e.frames.length&&(e.currentFrame=0),e.frames[e.currentFrame].draw()},e.play=()=>{e.animating?(clearInterval(e.animationIndervalId),e.animating=!1,document.getElementById("play").innerText="Play (A)"):(e.animationIndervalId=setInterval(e.animate,1e3/e.fps),e.animating=!0,document.getElementById("play").innerText="Stop (A)")},e.full=()=>{e.fullScreenMode&&window.innerHeight===window.screen.height?(document.exitFullscreen(),e.fullScreenMode=!1):(e.fullScreenMode=!0,document.getElementById("palette-background").requestFullscreen())},e.animatePreview=()=>{document.getElementById("preview").src=e.previews[e.previewFrame],e.previewFrame+=1,e.previewFrame>=e.previews.length&&(e.previewFrame=0)},e.playPreview=()=>{e.previewIndervalId&&clearInterval(e.previewIndervalId),e.previewIndervalId=setInterval(e.animatePreview,1e3/e.fps)},e.stopPreview=()=>{e.previewIndervalId&&clearInterval(e.previewIndervalId)},e.auth=()=>{function e(){}gapi.load("client:auth2",e)}}),g=n(10),m=n.n(g),v=n(0),b=n.n(v),y=n(1),w=n.n(y);class x{constructor(e){this.state=e;const{currentResolution:t,canvas:n,ctx:r,COLORS:i}=e;this.COLORS=i,this.canvas=n,this.ctx=r;const{cols:s,rows:a}=t;this.cols=s,this.rows=a,this.pixelSize=n.width/this.cols,this.pixels=Array(s*a).fill(i.transparent),this.getClickedPixel=b.a,this.outOfRange=w.a;const o=document.createElement("div");o.className="frame",o.id=`frame${e.frames.length}`,o.innerHTML=`\n    <div class="frame-number" id="number">${e.frames.length+1}</div>\n    <img class="frame-preview" id="frame-preview${e.frames.length}"\n         src="" alt="preview"></img>\n\n    <div class="copy-frame" id="copy"></div>\n    `;const c=document.getElementById("frame-control"),l=document.getElementById("new-frame");c.insertBefore(o,l),o.addEventListener("click",e.switchFrame),this.frameNumber=this.state.currentFrame}static clone(e){if(e instanceof x){const t=new x(e.state);return Object.assign(t.pixels,e.pixels),t}throw new Error("Object trying to be cloned is not a Frame")}load(e){this.pixels=e.frames[this.frameNumber],this.cols=e.currentResolution.cols,this.cols=e.currentResolution.rows}resize(e){const t=Array(e**2).fill(this.state.COLORS.transparent);for(let n=0;n<this.cols;n+=1)for(let r=0;r<this.rows;r+=1)this.pixels[n*this.cols+r]&&(t[n*e+r]=this.pixels[n*this.cols+r]);this.pixels=t,this.cols=e,this.rows=e,this.pixelSize=this.state.canvas.width/this.cols,this.draw()}draw(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(let e=0;e<this.cols;e+=1)for(let t=0;t<this.rows;t+=1)this.ctx.fillStyle=this.pixels[e*this.rows+t],this.ctx.strokeStyle=this.pixels[e*this.rows+t],this.ctx.fillRect(this.pixelSize*t,this.pixelSize*e,this.pixelSize,this.pixelSize);this.state.previews[this.frameNumber]=this.canvas.toDataURL(),document.getElementById(`frame-preview${this.frameNumber}`).src=this.canvas.toDataURL()}reset(){this.pixels=this.pixels.map(()=>this.COLORS.transparent),this.draw()}fill(e,t,n){const{color:r}=this.state;w()(this,e,t)||n===this.pixels[t*this.cols+e]||(w()(this,e,t-1)||this.pixels[(t-1)*this.cols+e]!==n||(this.pixels[(t-1)*this.cols+e]=r,this.fill(e,t-1,n)),w()(this,e+1,t)||this.pixels[t*this.cols+(e+1)]!==n||(this.pixels[t*this.cols+(e+1)]=r,this.fill(e+1,t,n)),w()(this,e,t+1)||this.pixels[(t+1)*this.cols+e]!==n||(this.pixels[(t+1)*this.cols+e]=r,this.fill(e,t+1,n)),w()(this,e-1,t)||this.pixels[t*this.cols+e-1]!==n||(this.pixels[t*this.cols+e-1]=r,this.fill(e-1,t,n)))}swapColors(e){this.pixels=this.pixels.map(t=>t===e?this.state.color:t)}click(e){e.button===this.state.CONSTANTS.RIGHT_BUTTON&&(this.state.primaryColor=this.state.color,this.state.color=this.state.secondaryColor);const{tool:t,color:n}=this.state,r=this.canvas.getBoundingClientRect(),i=e.clientX-r.left,s=e.clientY-r.top,a=b()(this,i,s),o=a.indx;if(o||0===o){if("pencil"!==t&&"eraser"!==t||(this.pixels[o]=n),"bucket"===t){const e=this.pixels[o];this.pixels[o]=n,this.fill(a.x,a.y,e)}if("samepixels"===t){const e=this.pixels[o];this.swapColors(e)}"picker"===t&&(e.button===this.state.CONSTANTS.LEFT_BUTTON&&this.state.changeColor(this.pixels[o]),e.button===this.state.CONSTANTS.RIGHT_BUTTON&&this.state.changeSecondaryColor(this.pixels[o]))}this.state.primaryColor&&(this.state.color=this.state.primaryColor),this.draw()}mouseDown(e){e.button===this.state.CONSTANTS.RIGHT_BUTTON&&(this.state.primaryColor=this.state.color,this.state.color=this.state.secondaryColor);const{tool:t,color:n}=this.state;if("pencil"===t||"eraser"===t){const t=this.canvas.getBoundingClientRect(),r=e.clientX-t.left,i=e.clientY-t.top;this.pixel=b()(this,r,i),this.pixelIndex=this.pixel.indx,(this.pixelIndex||0===this.pixelIndex)&&(this.initialX=r,this.initialY=i,this.pixels[this.pixelIdex]=n,document.onmousemove=this.onMove.bind(this),document.onmouseup=this.onUp.bind(this))}this.draw()}onMove(e){const{tool:t,color:n}=this.state;if("pencil"===t||"eraser"===t){const t=this.canvas.getBoundingClientRect(),r=e.clientX-t.left,i=e.clientY-t.top,s=b()(this,r,i).indx;(s||0===s)&&(this.pixels[s]=n),this.drawLine(r,i),this.initialX=r,this.initialY=i,this.draw()}}defaultMove(e){const t=this.canvas.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top,i=b()(this,n,r);i.indx&&(this.state.coordinats.innerHTML=`[${i.x}, ${i.y}]`)}drawLine(e,t){const{color:n}=this.state;let r=e,i=Math.abs(r-this.initialX)/this.cols;r>this.initialX&&(i=-i);let s=t,a=Math.abs(s-this.initialY)/this.rows;for(s>this.initialY&&(a=-a);Math.abs(r-this.initialX)>Math.abs(i)||Math.abs(s-this.initialY)>Math.abs(a);){r+=i,s+=a;const e=b()(this,r,s).indx;e&&(this.pixels[e]=n)}}onUp(){document.onmousemove=null,document.onmouseup=null,this.state.primaryColor&&(this.state.color=this.state.primaryColor),this.draw()}}n(18),n(24),n(25);function B(){for(var e=0,t={};e<256;e++)t[e]=String.fromCharCode(e);function n(){this.bin=[]}n.prototype.getData=function(){for(var e="",n=this.bin.length,r=0;r<n;r++)e+=t[this.bin[r]];return e},n.prototype.writeByte=function(e){this.bin.push(e)},n.prototype.writeUTFBytes=function(e){for(let t=e.length,n=0;n<t;n++)this.writeByte(e.charCodeAt(n))},n.prototype.writeBytes=function(e,t,n){for(let r=n||e.length,i=t||0;i<r;i++)this.writeByte(e[i])};const r={};let i,s,a,o,c,l,p,d,u,h=null,f=-1,g=0,m=!1;const v=[];let b=7,y=-1,w=!1,x=!0,B=!1,C=10,E="Generated by jsgif (https://github.com/antimatter15/jsgif/)";r.setDelay=function(e){g=Math.round(e/10)},r.setDispose=function(e){e>=0&&(y=e)},r.setRepeat=function(e){e>=0&&(f=e)},r.setTransparent=function(e){h=e},r.setComment=function(e){E=e},r.addFrame=function(e,t){if(null===e||!m||null===o)throw new Error("Please call start method before calling addFrame");let n=!0;try{t?e instanceof ImageData?(c=e.data,sizeset&&i==e.width&&s==e.height||D(e.width,e.height)):e instanceof Uint8ClampedArray?e.length==i*s*4?c=e:(console.log("Please set the correct size: ImageData length mismatch"),n=!1):(console.log("Please provide correct input"),n=!1):(c=e.getImageData(0,0,e.canvas.width,e.canvas.height).data,B||D(e.canvas.width,e.canvas.height)),S(),F(),x&&(L(),R(),f>=0&&T()),_(),""!==E&&I(),O(),x||R(),M(),x=!1}catch(e){n=!1}return n},r.download=function(e){if(null===o||0==w)console.log("Please call start method and add frames and call finish method before calling download");else{e=void 0!==e?e.endsWith(".gif")?e:`${e}.gif`:"download.gif";const t=document.createElement("a");t.download=e,t.href=URL.createObjectURL(new Blob([new Uint8Array(o.bin)],{type:"image/gif"})),t.click()}},r.finish=function(){if(!m)return!1;let e=!0;m=!1;try{o.writeByte(59),w=!0}catch(t){e=!1}return e};const k=function(){a=0,c=null,l=null,p=null,u=null,w=!1,x=!0};r.setFrameRate=function(e){15!=e&&(g=Math.round(100/e))},r.setQuality=function(e){e<1&&(e=1),C=e};var D=r.setSize=function(e,t){m&&!x||((i=e)<1&&(i=320),(s=t)<1&&(s=240),B=!0)};r.start=function(){k();let e=!0;w=!1,o=new n;try{o.writeUTFBytes("GIF89a")}catch(t){e=!1}return m=e},r.cont=function(){k();return w=!1,o=new n,m=!0};var F=function(){const e=l.length,t=e/3;p=[];const n=new NeuQuant(l,e,C);u=n.process();let r=0;for(let e=0;e<t;e++){const t=n.map(255&l[r++],255&l[r++],255&l[r++]);v[t]=!0,p[e]=t}l=null,d=8,b=7,null!==h&&(a=A(h))},A=function(e){if(null===u)return-1;const t=(16711680&e)>>16,n=(65280&e)>>8,r=255&e;let i=0,s=16777216;const a=u.length;for(let e=0;e<a;){const a=t-(255&u[e++]),o=n-(255&u[e++]),c=r-(255&u[e]),l=a*a+o*o+c*c,p=e/3;v[p]&&l<s&&(s=l,i=p),e++}return i},S=function(){const e=i,t=s;l=[];const n=c;let r=0;for(let i=0;i<t;i++)for(let t=0;t<e;t++){const s=i*e*4+4*t;l[r++]=n[s],l[r++]=n[s+1],l[r++]=n[s+2]}},_=function(){let e,t;o.writeByte(33),o.writeByte(249),o.writeByte(4),null===h?(e=0,t=0):(e=1,t=2),y>=0&&(t=7&y),t<<=2,o.writeByte(0|t|e),z(g),o.writeByte(a),o.writeByte(0)},I=function(){o.writeByte(33),o.writeByte(254),o.writeByte(E.length),o.writeUTFBytes(E),o.writeByte(0)},O=function(){o.writeByte(44),z(0),z(0),z(i),z(s),x?o.writeByte(0):o.writeByte(128|b)},L=function(){z(i),z(s),o.writeByte(240|b),o.writeByte(0),o.writeByte(0)},T=function(){o.writeByte(33),o.writeByte(255),o.writeByte(11),o.writeUTFBytes("NETSCAPE2.0"),o.writeByte(3),o.writeByte(1),z(f),o.writeByte(0)},R=function(){o.writeBytes(u);const e=768-u.length;for(let t=0;t<e;t++)o.writeByte(0)},z=function(e){o.writeByte(255&e),o.writeByte(e>>8&255)},M=function(){new LZWEncoder(i,s,p,d).encode(o)};r.stream=function(){return o},r.setProperties=function(e,t){m=e,x=t};return r}function C(e){var t=this;return this.whoami="apng png animation encoder canvas",this.canvas=e,this.repeat=0,this.frame=-1,this.seqNumber=-1,this.delay_num=1,this.delay_den=1,this.dispose=0,this.blend=1,this.apngBytes,this.frameBytes,this.started=!1,this.closeStream=!1,this.start=function(){return this.started=!0,this.closeStream=!1,this.apngBytes=new E(0),this.frameBytes=new E(0),this.frame=-1,this.seqNumber=-1,0},this.setDelay=function(e){return this.delay_num=parseInt(e),this.delay_den=100,0},this.setRepeat=function(e){return e>=0&&(this.repeat=parseInt(e)),0},this.setDispose=function(e){return e<0||e>2?0:(this.dispose=parseInt(e),0)},this.setBlend=function(e){return e<0||e>1?0:(this.blend=parseInt(e),0)},this.addFrame=function(){if(null===this.canvas||!this.started||null===this.apngBytes)throw new Error("Please call start method before calling addFrame");this.frame+=1;var e=this.canvas.toDataURL("image/png").replace(/^data:image\/png;base64,/,"");if(this.frameBytes.bin=function(e){for(var t=atob(e),n=t.length,r=new Array(n),i=0;i<n;++i)r[i]=t.charCodeAt(i);return r}(e),0==this.frame){this.apngBytes.bin=this.apngBytes.bin.concat([137,80,78,71,13,10,26,10]);var t=this.frameBytes.findChunk("IHDR"),n=this.frameBytes.bin.slice(t.idx,t.idx+12+t.len);this.apngBytes.bin=this.apngBytes.bin.concat(n);var r=new Array(0),i=I((r=(r=(r=(r=r.concat([0,0,0,8])).concat(k("acTL"))).concat([0,0,0,1])).concat(F(this.repeat))).slice(4,16));r=r.concat(F(i)),this.apngBytes.bin=this.apngBytes.bin.concat(r);for(var s=this.frameBytes.findChunkAll("IDAT"),a=0;a<s.length;a++){if(0==a){this.seqNumber+=1;i=I((o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=new Array(0)).concat(F(26))).concat(k("fcTL"))).concat(F(this.seqNumber))).concat(F(this.canvas.width))).concat(F(this.canvas.height))).concat(F(0))).concat(F(0))).concat(S(this.delay_num))).concat(S(this.delay_den))).concat([this.dispose])).concat([this.blend])).slice(4,34));o=o.concat(F(i)),this.apngBytes.bin=this.apngBytes.bin.concat(o)}t=s[a];n=this.frameBytes.bin.slice(t.idx,t.idx+12+t.len);this.apngBytes.bin=this.apngBytes.bin.concat(n)}}if(this.frame>0)for(s=this.frameBytes.findChunkAll("IDAT"),a=0;a<s.length;a++){if(0==a){var o;this.seqNumber+=1;i=I((o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=new Array(0)).concat(F(26))).concat(k("fcTL"))).concat(F(this.seqNumber))).concat(F(this.canvas.width))).concat(F(this.canvas.height))).concat(F(0))).concat(F(0))).concat(S(this.delay_num))).concat(S(this.delay_den))).concat([this.dispose])).concat([this.blend])).slice(4,34));o=o.concat(F(i)),this.apngBytes.bin=this.apngBytes.bin.concat(o)}t=s[a];var c=this.frameBytes.bin.slice(t.idx+8,t.idx+8+t.len),l=t.len+4;this.seqNumber+=1;var p=new Array(0);i=I((p=(p=(p=(p=p.concat(F(l))).concat(k("fdAT"))).concat(F(this.seqNumber))).concat(c)).slice(4,8+l));p=p.concat(F(i)),this.apngBytes.bin=this.apngBytes.bin.concat(p)}return 0},this.finish=function(){if(!this.started)return!1;this.apngBytes.bin=this.apngBytes.bin.concat([0,0,0,0,73,69,78,68,174,66,96,130]);var e=this.apngBytes.findChunk("acTL"),t=F(this.frame+1);this.apngBytes.bin[e.idx+8]=t[0],this.apngBytes.bin[e.idx+8+1]=t[1],this.apngBytes.bin[e.idx+8+2]=t[2],this.apngBytes.bin[e.idx+8+3]=t[3];var n=F(I(this.apngBytes.bin.slice(e.idx+4,e.idx+4+4+8)));return this.apngBytes.bin[e.idx+4+4+8]=n[0],this.apngBytes.bin[e.idx+4+4+8+1]=n[1],this.apngBytes.bin[e.idx+4+4+8+2]=n[2],this.apngBytes.bin[e.idx+4+4+8+3]=n[3],this.started=!1,this.closeStream=!0,!0},this.stream=function(){return t.apngBytes},this.download=function(e){e=void 0!==e?e.endsWith(".png")?e:`${e}.png`:"download.png";const t=document.createElement("a");t.download=e;var n=this.stream();t.href=URL.createObjectURL(new Blob([new Uint8Array(n.bin)],{type:"image/png"})),t.click()},this}function E(e){function t(e,t,n){this.idx=e,this.len=t,this.type=n}return this.bin=new Array(e),this.findChunk=function(e){for(var n=8,r=null;n<this.bin.length;){var i=this.bin.slice(n,n+4),s=this.bin.slice(n+4,n+8),a=A(i),o=D(s);if(o===e)return r=new t(n,a,o);n+=8+a+4}return r},this.findChunkAll=function(e){for(var n=8,r=[];n<this.bin.length;){var i=this.bin.slice(n,n+4),s=this.bin.slice(n+4,n+8),a=A(i),o=D(s);if(o===e){var c=new t(n,a,o);r.push(c)}n+=8+a+4}return r},this.toStrHex=function(){return function(e){for(var t="",n=0;n<e.length;n++)t+=(r=e[n],i=2,(r+Math.pow(16,i)).toString(16).slice(-i).toUpperCase()+" ");var r,i;return t}(this.bin)},this.toStrBase64=function(){return function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return btoa(t)}(this.bin)},this.toStrAscii=function(){return function(e){for(var t="",n=0;n<e.length;n++)e[n]>32&&e[n]<127?t+=String.fromCharCode(e[n]):t+=".";return t}(this.bin)},this.toStrDec=function(){return function(e){for(var t="",n=0;n<e.length;n++)t+=("000"+e[n]).slice(-3),t+=" ";return t}(this.bin)},this}function k(e){var t=new Array(4);return t[0]=e.charCodeAt(0),t[1]=e.charCodeAt(1),t[2]=e.charCodeAt(2),t[3]=e.charCodeAt(3),t}function D(e){return String.fromCharCode(e[0])+String.fromCharCode(e[1])+String.fromCharCode(e[2])+String.fromCharCode(e[3])}function F(e){for(var t=e,n=[0,0,0,0],r=0;r<n.length;r++){var i=255&t;n[r]=i,t=(t-i)/256}return n.reverse()}function A(e){return(e[0]<<24)+(e[1]<<12)+(e[2]<<8)+e[3]}function S(e){for(var t=e,n=[0,0],r=0;r<n.length;r++){var i=255&t;n[r]=i,t=(t-i)/256}return n.reverse()}var _="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D".split(" ").map(function(e){return parseInt(e,16)});function I(e){if("string"==typeof e||e instanceof String)for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);else{if(!Array.isArray(e))return alert("Bad input for CRC32 calculation: "+e),0;t=e}for(var r=-1,i=(n=0,t.length);n<i;n++)r=r>>>8^_[255&(r^t[n])];return(-1^r)>>>0}class O{constructor(e){this.state=e;const t=document.createElement("div");t.innerHTML=m.a;const n=document.getElementById("canvas-wrapper");n.parentNode.insertBefore(t,n),this.state.frames=[],this.state.previews=[],this.createNewFrame(),document.getElementById("new-frame").addEventListener("click",this.createNewFrame.bind(this))}loadProject(e){this.cleanProject(),this.state.frames=[],e.frames.forEach(()=>{this.createNewFrame()}),this.state.setFps(e.fps),this.state.previews=[],this.renumerate(),document.getElementById(`size${e.currentResolution.cols}`).click(),this.state.frames.forEach(t=>{t.load(e)}),this.state.frames.forEach(e=>{e.draw()})}getDataToSave(){const e={frames:[]};return this.state.frames.forEach(t=>{e.frames.push(t.pixels)}),e.currentResolution=this.state.currentResolution,e.fps=this.state.fps,JSON.stringify(e)}saveToFile(){const e=this.getDataToSave(),t=document.createElement("a");t.download="animation.piskelc";const n=new Blob([e],{type:"text/plain"});t.href=window.URL.createObjectURL(n),t.click()}saveToApng(){const e=new C(this.state.canvas);e.setRepeat(0),e.setDelay(100/this.state.fps),e.setDispose(0),e.setBlend(1),e.start(),this.state.frames.forEach(t=>{t.draw();const n=this.state.canvas.getContext("2d");e.addFrame(n)}),e.finish(),e.download("animation")}saveToGif(){const e=new B;return e.setRepeat(0),e.setDelay(1e3/this.state.fps),e.start(),this.state.frames.forEach(t=>{t.draw();const n=this.state.canvas.getContext("2d");e.addFrame(n)}),e.finish(),e.download("animation"),e.stream().getData()}saveToLocalStorage(){const e=this.getDataToSave();localStorage.animation=e}uploadToGiphy(){this.a=0;const e=this.saveToGif(),t=new XMLHttpRequest,n=`api_key=h6K1A7hnzfEzlStO00rW90YcQhuRrGps&file=${e}`;t.open("POST","http://upload.giphy.com/v1/gifs",!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onreadystatechange=()=>{4===t.readyState&&200===t.status&&alert(t.responseText)},t.send(n)}loadFromLocalStorage(){if(localStorage.animation){const e=JSON.parse(localStorage.animation);this.loadProject(e)}}cleanProject(){this.a=0;const e=document.getElementById("frame-control");this.state.currentFrame=0,this.state.previewFrame=0;let t=e.firstChild.nextSibling;for(;"new-frame"!==t.id;){const e=t;t=t.nextSibling,e.remove()}}resizePalette(e){this.state.currentResolution={cols:e,rows:e},this.state.frames.forEach(t=>{t.resize(e)})}showCoordinats(e){this.state.frames[this.state.currentFrame].defaultMove(e)}swapFrames(e,t){let n=this.state.frames[e];this.state.frames[e]=this.state.frames[t],this.state.frames[t]=n,n=this.state.previews[e],this.state.previews[e]=this.state.previews[t],this.state.previews[t]=n}static moveDownFrame(e){const t=e.target.parentNode;let n=+t.id.slice(5);t.style["z-index"]=1,document.body.style.cursor="move";const r={x:e.clientX,y:e.clientY};document.onmousemove=function(e){const i={x:e.clientX-r.x,y:e.clientY-r.y};i.y>111&&"new-frame"!==t.nextSibling.id&&(t.parentNode.insertBefore(t,t.nextSibling.nextSibling),r.y=e.clientY,i.y=0,this.swapFrames(n,n+1),n+=1),i.y<-111&&t.previousSibling.previousSibling&&(t.parentNode.insertBefore(t,t.previousSibling),r.y=e.clientY,i.y=0,this.swapFrames(n,n-1),n-=1),t.style.transform=`translateY(${i.y}px)`}.bind(this),document.onmouseup=function(){document.body.style.cursor="inherit",t.style.transform="translateY(0px)",t.style.transform="scale(1)",document.onmousemove=null,document.onmouseup=null,this.state.currentFrame=n,this.renumerate(),this.state.frames[this.state.currentFrame].draw()}.bind(this)}renumerate(){let e=0,t=document.getElementById("frame-control").firstChild.nextSibling;for(;"new-frame"!==t.id;)t.id=`frame${e}`,t.innerHTML=`\n      <div class="frame-number" id="number${e}">${e+1}</div>\n      <div class="delete-frame" id="delete${e}"></div>\n\n      <img class="frame-preview" id="frame-preview${e}"\n          src="${this.state.previews[e]}" alt="preview"></img>\n\n      <div class="move-frame" id="move${e}"></div>\n      <div class="copy-frame" id="copy${e}"></div>\n      `,t.style.border="2px solid gray",t.style["z-index"]=0,document.getElementById(`move${e}`).addEventListener("mousedown",O.moveDownFrame.bind(this)),t.onclick=this.switchFrame.bind(this),t=t.nextSibling,this.state.frames[e].frameNumber=e,e+=1;document.getElementById(`frame${this.state.currentFrame}`)&&(document.getElementById(`frame${this.state.currentFrame}`).style.border="2px solid yellow"),1===this.state.frames.length&&(document.getElementById(`delete${this.state.currentFrame}`).remove(),document.getElementById(`move${this.state.currentFrame}`).remove())}switchFrame(e){if("frame-preview"===e.target.id.slice(0,13)){this.state.animating&&this.state.play();const t=+e.target.id.slice(13);document.getElementById(`frame${t}`).style.border="2px solid yellow",this.state.currentFrame=t}if("number"===e.target.id.slice(0,6)){this.state.animating&&this.state.play();const t=+e.target.id.slice(6);document.getElementById(`frame${t}`).style.border="2px solid yellow",this.state.currentFrame=t}if("delete"===e.target.id.slice(0,6)&&this.state.frames.length>1){const t=+e.target.id.slice(6);this.state.frames.splice(t,1),this.state.previews.splice(t,1),this.state.currentFrame>=this.state.frames.length&&(this.state.currentFrame=this.state.frames.length-1),this.state.previewFrame=0,e.target.parentNode.remove()}if("copy"===e.target.id.slice(0,4)){const t=+e.target.id.slice(4);this.state.frames.splice(t,0,x.clone(this.state.frames[t])),this.state.previews.splice(t,0,this.state.previews[t]),this.state.currentFrame=t+1}this.renumerate(),this.state.frames[this.state.currentFrame].draw()}createNewFrame(){this.state.currentFrame=this.state.frames.length,this.state.frames.push(new x(this.state)),this.state.frames[this.state.currentFrame].draw(),this.renumerate()}}var L=n(6),T=n.n(L);(new class{constructor(e){this.state=e}init(){const{COLORS:e,RESOLUTIONS:t}=T.a,n={COLORS:e,RESOLUTIONS:t,currentResolution:t.medium,tool:"pencil",color:e.black,secondaryColor:e.white,prevColor:e.gray,currentFrame:0,previewFrame:0,animating:!1,fps:8};n.CONSTANTS=T.a,this.state=n,f(n),h(n),document.body.innerHTML=i.a,n.canvas=document.getElementById("palette"),n.ctx=n.canvas.getContext("2d"),n.canvas.onclick=n.canvasClick,n.canvas.onmousedown=n.canvasMouseDown,n.canvas.oncontextmenu=n.canvasClick,n.reset=document.getElementById("reset"),n.reset.onclick=n.resetClick,n.bucket=document.getElementById("bucket"),n.bucket.onclick=n.bucketClick,n.picker=document.getElementById("picker"),n.picker.onclick=n.pickerClick,n.pencil=document.getElementById("pencil"),n.pencil.addEventListener("click",n.pencilClick),n.eraser=document.getElementById("eraser"),n.eraser.addEventListener("click",n.eraserClick),n.samepixels=document.getElementById("samepixels"),n.samepixels.addEventListener("click",n.samepixelsClick),n.canvas.style.cursor=`url(${a.a}) 0 30, auto`,document.addEventListener("keydown",n.keyHandler),n.current=document.getElementById("current"),n.prev=document.getElementById("prev"),n.prev.onclick=function(){n.changeColor(n.prevColor)},n.prevInd=document.getElementById("prev-indicator"),n.red=document.getElementById("red"),n.red.onclick=function(){n.changeColor(n.COLORS.red)},n.blue=document.getElementById("blue"),n.blue.onclick=function(){n.changeColor(n.COLORS.blue)},n.pencil.style.background="rgb(219, 219, 219)",n.changeColor(n.color),n.sizeManager=document.getElementById("size-manager"),n.sizeManager.addEventListener("click",n.sizeManagerClick),n.colorSelector=document.getElementById("color-selector"),n.colorSelector.addEventListener("change",n.selectColor),n.secondaryColorSelector=document.getElementById("secondary-color-selector"),n.secondaryColorSelector.addEventListener("change",n.selectSecondaryColor),n.secondaryColorSelector.value=e.white,n.fileInput=document.getElementById("open-file"),n.fileInput.addEventListener("change",n.fileInputHandler,!1),document.getElementById("play").addEventListener("click",n.play),document.getElementById("fullscreen").addEventListener("click",n.full),document.getElementById("load").addEventListener("click",()=>{n.fileInput.click()}),document.getElementById("save").addEventListener("click",()=>{n.frameManager.saveToFile()}),document.getElementById("fps-wrapper").addEventListener("click",n.fpsClick),document.getElementById("fps-range").addEventListener("input",n.fpsChange),document.addEventListener("mouseup",n.bodyMouseUp),n.frameManager=new O(n),document.getElementById("local-load").addEventListener("click",n.frameManager.loadFromLocalStorage.bind(n.frameManager)),document.getElementById("local-save").addEventListener("click",n.frameManager.saveToLocalStorage.bind(n.frameManager)),document.getElementById("gif-save").addEventListener("click",n.frameManager.saveToGif.bind(n.frameManager)),document.getElementById("apng-save").addEventListener("click",n.frameManager.saveToApng.bind(n.frameManager)),n.coordinats=document.getElementById("coordinats");const r={};r.state=n,n.canvas.addEventListener("mousemove",n.frameManager.showCoordinats.bind(r)),n.playPreview(),n.auth()}}).init()}]);
//# sourceMappingURL=app.bundle.js.map